name: setup-dotenv
inputs:
  ADMIN_WALLET_PRIVATE_KEY:
    required: true
  AWS_KNOWTFOLIO_ADMIN_ACCESS_KEY:
    required: true
  AWS_KNOWTFOLIO_ADMIN_SECRET_KEY:
    required: true
  DB_URI:
    required: false
    default: root:password@tcp(db:3306)/knowtfolio-db
runs:
  using: "composite"
  steps:
    - shell: bash
      run: |
        touch server/.env
        echo DB_URI=${{inputs.DB_URI}} >> server/.env
        echo ADMIN_PRIVATE_KEY=${{inputs.ADMIN_WALLET_PRIVATE_KEY}} >> server/.env
        echo CONTRACT_ADDRESS=0xd08db6d8Fb163182722e0D17fa8146f26a79BB6A >> server/.env
        echo NETWORK_URI=https://polygon-mumbai.g.alchemy.com/v2/ZRG81-lcDf9T69OmxipvuoO-FMMFAOoH >> server/.env
        echo CHAIN_ID=80001 >> server/.env
        echo AWS_ACCESS_KEY=${{inputs.AWS_KNOWTFOLIO_ADMIN_ACCESS_KEY}} >> server/.env
        echo AWS_SECRET_KEY=${{inputs.AWS_KNOWTFOLIO_ADMIN_SECRET_KEY}} >> server/.env
        echo AWS_REGION=ap-northeast-1 >> server/.env
        echo S3_BUCKET_NAME=dev-knowtfolio-nfts >> server/.env
